(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-40053fa0"],{"69f6":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"visit"},[i("div",{staticClass:"row"},[i("Sidebar",{attrs:{name:t.patient.name,links:t.links}}),i("div",{staticClass:"col-10",attrs:{id:"content"}},[i("ol",{staticClass:"breadcrumb"},[t._m(0),i("li",{staticClass:"breadcrumb-item",attrs:{"aria-current":"page"}},[i("a",{attrs:{href:"/patients/envelope/"+t.patient_id}},[t._v("Patient Envelope")])]),i("li",{staticClass:"breadcrumb-item active",attrs:{"aria-current":"page"}},[t._v("Visit Record")])]),i("div",{staticClass:"rectangle mb-25"},[i("h3",{staticClass:"col-12 col-md-6 m-0"},[t._v(t._s(t.visit.createdAt))])]),i("div",{staticClass:"rectangle mg-2"},[t._m(1),i("div",{staticClass:"w-100 px-3"},t._l(t.files,(function(e){return i("div",{key:e.filename,staticClass:"row mt-2 round-border"},[i("div",{staticClass:"col-9"},[i("button",{staticClass:"btn w-100 text-left",on:{click:function(i){return t.showFile(e)}}},[t._v(t._s(e.filename))])]),i("div",{staticClass:"col-3"},[i("button",{staticClass:"btn btn-danger float-right",on:{click:function(i){return t.deleteFile(e._id)}}},[t._v("Delete")])])])})),0),0==t.files.length?i("div",[t._v(" No Files Yet! ")]):t._e(),i("div",{staticClass:"card mt-5"},[i("div",{staticClass:"card-body"},[i("h4",{staticClass:"card-title"},[t._v("Upload File")]),i("input",{staticClass:"form-control-file my-auto",attrs:{type:"file",id:"uploadForm",accept:"image/*"}}),i("button",{staticClass:"btn btn-success",on:{click:t.uploadFile}},[t._v(" + Upload File ")])])])])])],1)])},a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("li",{staticClass:"breadcrumb-item"},[i("a",{attrs:{href:"/"}},[t._v("Home")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"row mb-2"},[i("h3",{staticClass:"col-6"},[t._v("Supporting Files")])])}],c=(i("99af"),i("96cf"),i("1da1")),s=i("5ea5"),r=i("c1df"),o=i.n(r),l=i("933e"),u=i("c3ee"),d=(i("b0c0"),i("d3b7"),i("d4ec")),f=i("bee2"),v=i("bc3a"),p=i.n(v),h="api/files",m=function(){function t(){Object(d["a"])(this,t)}return Object(f["a"])(t,null,[{key:"getFiles",value:function(t){return new Promise((function(e,i){p.a.get("".concat(h,"/").concat(t)).then((function(t){e(t)})).catch((function(t){i(t)}))}))}},{key:"addFile",value:function(t,e){return new Promise((function(i,n){try{var a=new FormData;a.append("file",e,e.name),p.a.post("".concat(h,"/").concat(t),a).then((function(t){i(t)}))}catch(c){n(c)}}))}},{key:"deleteFile",value:function(t){return new Promise((function(e,i){try{p.a.delete("".concat(h,"/").concat(t)).then((function(t){e(t)}))}catch(n){i(n)}}))}}]),t}(),b=m,_={name:"SupportFile",components:{Sidebar:s["a"]},data:function(){return{links:[],files:[],patient_id:"",visit_id:"",visit:"",patient:""}},created:function(){var t=this;this.patient_id=this.$route.params.id,this.visit_id=this.$route.params.visit_id,this.visit=l["a"].getVisitDetails(this.visit_id).then((function(e){t.visit=e,t.visit.createdAt=o()(e.createdAt).format("LLL")})),this.links.push({name:"SOAP",dest:"/patients/visits/".concat(this.patient_id,"/").concat(this.visit_id)}),u["a"].fetchPatientProfile(this.patient_id).then((function(e){t.patient=e})),this.loadFiles()},methods:{loadFiles:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:b.getFiles(t.visit_id).then((function(e){t.files=e.data})).catch((function(){t.files=null}));case 1:case"end":return e.stop()}}),e)})))()},uploadFile:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=$("#uploadForm").prop("files")[0],e.next=3,b.addFile(t.visit_id,i);case 3:t.loadFiles();case 4:case"end":return e.stop()}}),e)})))()},deleteFile:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,b.deleteFile(t);case 2:e.loadFiles();case 3:case"end":return i.stop()}}),i)})))()},showFile:function(t){var e=new Image;e.src="data:image/jpg;base64,".concat(t.filedata.data);var i=window.open("");i.document.write(e.outerHTML)}}},w=_,g=(i("f918"),i("2877")),C=Object(g["a"])(w,n,a,!1,null,"3c542f23",null);e["default"]=C.exports},"75a2":function(t,e,i){},"933e":function(t,e,i){"use strict";i("d3b7");var n=i("d4ec"),a=i("bee2"),c=i("bc3a"),s=i.n(c),r="api/visits",o=function(){function t(){Object(n["a"])(this,t)}return Object(a["a"])(t,null,[{key:"createVisit",value:function(t){return s.a.post(r,t)}},{key:"getVisitDetails",value:function(t){return new Promise((function(e,i){try{s.a.get("".concat(r,"/").concat(t)).then((function(t){var i=t.data;e(i)}))}catch(n){console.log(n),i(n)}}))}},{key:"updateVisit",value:function(t,e){return new Promise((function(i,n){try{s.a.post("".concat(r,"/").concat(t),e).then((function(){i()}))}catch(a){n(a)}}))}},{key:"deleteVisit",value:function(t){return s.a.delete("".concat(r,"/").concat(t))}},{key:"saveCanvas",value:function(t,e){return new Promise((function(i,n){try{s.a.post("".concat(r,"/").concat(t,"/saveCanvas"),e).then((function(){i()}))}catch(a){n(a)}}))}}]),t}();e["a"]=o},f918:function(t,e,i){"use strict";var n=i("75a2"),a=i.n(n);a.a}}]);
//# sourceMappingURL=chunk-40053fa0.f6621f85.js.map