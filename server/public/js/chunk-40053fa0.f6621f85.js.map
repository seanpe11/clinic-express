{"version":3,"sources":["webpack:///./src/views/SupportFiles.vue?3adb","webpack:///./src/FileService.js","webpack:///src/views/SupportFiles.vue","webpack:///./src/views/SupportFiles.vue?3170","webpack:///./src/views/SupportFiles.vue?ed3c","webpack:///./src/VisitService.js","webpack:///./src/views/SupportFiles.vue?5868"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","patient","name","links","_m","patient_id","_v","_s","visit","createdAt","_l","file","key","filename","on","$event","showFile","deleteFile","_id","files","length","_e","uploadFile","staticRenderFns","url","FileService","visitId","Promise","resolve","reject","axios","get","then","res","catch","err","formData","FormData","append","post","fileId","delete","components","Sidebar","data","created","$route","params","id","visit_id","VisitService","push","dest","PatientService","loadFiles","methods","image","src","w","document","write","outerHTML","component","body","console","log"],"mappings":"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","file":"js/chunk-40053fa0.f6621f85.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"visit\"},[_c('div',{staticClass:\"row\"},[_c('Sidebar',{attrs:{\"name\":_vm.patient.name,\"links\":_vm.links}}),_c('div',{staticClass:\"col-10\",attrs:{\"id\":\"content\"}},[_c('ol',{staticClass:\"breadcrumb\"},[_vm._m(0),_c('li',{staticClass:\"breadcrumb-item\",attrs:{\"aria-current\":\"page\"}},[_c('a',{attrs:{\"href\":'/patients/envelope/' + _vm.patient_id}},[_vm._v(\"Patient Envelope\")])]),_c('li',{staticClass:\"breadcrumb-item active\",attrs:{\"aria-current\":\"page\"}},[_vm._v(\"Visit Record\")])]),_c('div',{staticClass:\"rectangle mb-25\"},[_c('h3',{staticClass:\"col-12 col-md-6 m-0\"},[_vm._v(_vm._s(_vm.visit.createdAt))])]),_c('div',{staticClass:\"rectangle mg-2\"},[_vm._m(1),_c('div',{staticClass:\"w-100 px-3\"},_vm._l((_vm.files),function(file){return _c('div',{key:file.filename,staticClass:\"row mt-2 round-border\"},[_c('div',{staticClass:\"col-9\"},[_c('button',{staticClass:\"btn w-100 text-left\",on:{\"click\":function($event){return _vm.showFile(file)}}},[_vm._v(_vm._s(file.filename))])]),_c('div',{staticClass:\"col-3\"},[_c('button',{staticClass:\"btn btn-danger float-right\",on:{\"click\":function($event){return _vm.deleteFile(file._id)}}},[_vm._v(\"Delete\")])])])}),0),(_vm.files.length == 0)?_c('div',[_vm._v(\" No Files Yet! \")]):_vm._e(),_c('div',{staticClass:\"card mt-5\"},[_c('div',{staticClass:\"card-body\"},[_c('h4',{staticClass:\"card-title\"},[_vm._v(\"Upload File\")]),_c('input',{staticClass:\"form-control-file my-auto\",attrs:{\"type\":\"file\",\"id\":\"uploadForm\",\"accept\":\"image/*\"}}),_c('button',{staticClass:\"btn btn-success\",on:{\"click\":_vm.uploadFile}},[_vm._v(\" + Upload File \")])])])])])],1)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('li',{staticClass:\"breadcrumb-item\"},[_c('a',{attrs:{\"href\":\"/\"}},[_vm._v(\"Home\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"row mb-2\"},[_c('h3',{staticClass:\"col-6\"},[_vm._v(\"Supporting Files\")])])}]\n\nexport { render, staticRenderFns }","import axios from 'axios';\r\n\r\nconst url = 'api/files';\r\n\r\nclass FileService {\r\n  static getFiles(visitId) {\r\n      return new Promise((resolve, reject) => {\r\n          axios.get(`${url}/${visitId}`)\r\n            .then((res) => {\r\n              resolve(res);\r\n            })\r\n            .catch((err) => {\r\n                reject(err);\r\n            });\r\n        });\r\n  }\r\n\r\n  static addFile(visitId, file) {\r\n    return new Promise((resolve, reject) => {\r\n        try {\r\n            const formData = new FormData();\r\n            formData.append('file', file, file.name);\r\n            axios.post(`${url}/${visitId}`, formData)\r\n                .then((res) => {\r\n                    resolve(res);\r\n                });\r\n          } catch (err) {\r\n            reject(err);\r\n          }\r\n    });\r\n  }\r\n\r\n  static deleteFile(fileId) {\r\n    return new Promise((resolve, reject) => {\r\n        try {\r\n            axios.delete(`${url}/${fileId}`)\r\n              .then((res) => {\r\n                resolve(res);\r\n              });\r\n          } catch (err) {\r\n            reject(err);\r\n          }\r\n    });\r\n  }\r\n}\r\n\r\nexport default FileService;\r\n","<template>\r\n  <div class=\"visit\">\r\n    <div class=\"row\">\r\n      <Sidebar :name='patient.name' :links='links'/>\r\n      <div id=\"content\" class='col-10'>\r\n        <ol class=\"breadcrumb\">\r\n          <li class=\"breadcrumb-item\"><a href=\"/\">Home</a></li>\r\n          <li class=\"breadcrumb-item\" aria-current=\"page\">\r\n            <a :href=\"'/patients/envelope/' + patient_id \">Patient Envelope</a>\r\n          </li>\r\n          <li class=\"breadcrumb-item active\" aria-current=\"page\">Visit Record</li>\r\n        </ol>\r\n        <div class=\"rectangle mb-25\">\r\n          <h3 class=\"col-12 col-md-6 m-0\">{{visit.createdAt}}</h3>\r\n        </div>\r\n        <div class=\"rectangle mg-2\">\r\n          <div class=\"row mb-2\">\r\n              <h3 class='col-6'>Supporting Files</h3>\r\n          </div>\r\n          <div class='w-100 px-3'>\r\n            <div class=\"row mt-2 round-border\" v-for='file in files' :key='file.filename'>\r\n              <div class=\"col-9\"><button class='btn w-100 text-left' @click=\"showFile(file)\">{{file.filename}}</button></div>\r\n              <div class=\"col-3\"><button class='btn btn-danger float-right' @click=\"deleteFile(file._id)\">Delete</button></div>\r\n            </div>\r\n          </div>\r\n          <div v-if=\"files.length == 0\">\r\n            No Files Yet!\r\n          </div>\r\n          <div class=\"card mt-5\">\r\n              <div class=\"card-body\">\r\n                <h4 class=\"card-title\">Upload File</h4>\r\n                  <input type=\"file\" class='form-control-file my-auto' id=\"uploadForm\" accept=\"image/*\">\r\n                  <button class='btn btn-success' @click=\"uploadFile\"> + Upload File </button>\r\n              </div>\r\n            </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n/* eslint-env jquery */\r\nimport Sidebar from '@/components/Sidebar.vue';\r\nimport moment from 'moment';\r\nimport VisitService from '../VisitService';\r\nimport PatientService from '../PatientService';\r\nimport FileService from '../FileService';\r\n\r\nexport default {\r\n  name: 'SupportFile',\r\n  components: {\r\n    Sidebar,\r\n  },\r\n  data: () => ({\r\n    links: [],\r\n    // replace this with the mongodb query result\r\n    files: [],\r\n    patient_id: '',\r\n    visit_id: '',\r\n    visit: '',\r\n    patient: '',\r\n  }),\r\n  created() {\r\n    this.patient_id = this.$route.params.id;\r\n    this.visit_id = this.$route.params.visit_id;\r\n    this.visit = VisitService.getVisitDetails(this.visit_id).then((visit) => {\r\n      this.visit = visit;\r\n      this.visit.createdAt = moment(visit.createdAt).format('LLL');\r\n    });\r\n    this.links.push({\r\n      name: 'SOAP',\r\n      dest: `/patients/visits/${this.patient_id}/${this.visit_id}`,\r\n    });\r\n    PatientService.fetchPatientProfile(this.patient_id).then((patient) => {\r\n      this.patient = patient;\r\n    });\r\n    this.loadFiles();\r\n  },\r\n  methods: {\r\n    async loadFiles() {\r\n      FileService.getFiles(this.visit_id)\r\n      .then((res) => {\r\n        this.files = res.data;\r\n      })\r\n      .catch(() => {\r\n        this.files = null;\r\n      });\r\n    },\r\n    async uploadFile() {\r\n      const file = $('#uploadForm').prop('files')[0];\r\n\r\n      await FileService.addFile(this.visit_id, file);\r\n      this.loadFiles();\r\n    },\r\n    async deleteFile(id) {\r\n      await FileService.deleteFile(id);\r\n      this.loadFiles();\r\n    },\r\n    showFile(data) {\r\n      const image = new Image();\r\n      image.src = `data:image/jpg;base64,${data.filedata.data}`;\r\n      const w = window.open('');\r\n      w.document.write(image.outerHTML);\r\n    },\r\n  },\r\n};\r\n\r\n</script>\r\n\r\n<style scoped>\r\n\r\n#content {\r\n  padding: .25in .5in;\r\n}\r\n\r\n.round-border {\r\n  border: 1px solid black;\r\n  border-radius: 10px;\r\n  padding: 10px;\r\n}\r\n\r\n.round-border:hover {\r\n  background-color: lightgrey;\r\n}\r\n\r\n.breadcrumb {\r\n  background: transparent;\r\n}\r\n\r\n.list-group-item:hover {\r\n    background-color: lightgrey;\r\n}\r\n\r\n.list-group-item > button {\r\n  border: none;\r\n  background: transparent;\r\n  height: 100%;\r\n  width: 100%;\r\n  text-align: left;\r\n}\r\n\r\n.add-btn {\r\n    border: none;\r\n    background: transparent;\r\n    text-align: left;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SupportFiles.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SupportFiles.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SupportFiles.vue?vue&type=template&id=3c542f23&scoped=true&\"\nimport script from \"./SupportFiles.vue?vue&type=script&lang=js&\"\nexport * from \"./SupportFiles.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SupportFiles.vue?vue&type=style&index=0&id=3c542f23&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3c542f23\",\n  null\n  \n)\n\nexport default component.exports","import axios from 'axios';\r\n\r\nconst url = 'api/visits';\r\n\r\nclass VisitService {\r\n  static createVisit(body) {\r\n    return axios.post(url, body);\r\n  }\r\n\r\n  static getVisitDetails(id) {\r\n    return new Promise((resolve, reject) => {\r\n      try {\r\n        axios.get(`${url}/${id}`)\r\n          .then((res) => {\r\n            const { data } = res;\r\n            resolve(data);\r\n          });\r\n      } catch (err) {\r\n        console.log(err);\r\n        reject(err);\r\n      }\r\n    });\r\n  }\r\n\r\n  // TODO: Add update visit @Sean\r\n  static updateVisit(id, data) {\r\n    return new Promise((resolve, reject) => {\r\n      try {\r\n        axios.post(`${url}/${id}`, data)\r\n          .then(() => {\r\n            resolve();\r\n          });\r\n      } catch (err) {\r\n        reject(err);\r\n      }\r\n    });\r\n  }\r\n\r\n  static deleteVisit(id) {\r\n    return axios.delete(`${url}/${id}`);\r\n  }\r\n\r\n  static saveCanvas(id, data) {\r\n    return new Promise((resolve, reject) => {\r\n      try {\r\n        axios.post(`${url}/${id}/saveCanvas`, data)\r\n          .then(() => {\r\n            resolve();\r\n          });\r\n      } catch (err) {\r\n        reject(err);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nexport default VisitService;\r\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SupportFiles.vue?vue&type=style&index=0&id=3c542f23&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SupportFiles.vue?vue&type=style&index=0&id=3c542f23&scoped=true&lang=css&\""],"sourceRoot":""}